# ============================================================================
# MONCABINET VPS PRODUCTION ENVIRONMENT - TEMPLATE
# ============================================================================
# Copier ce fichier vers .env.production et remplir les valeurs
# Commande: cp .env.production.template .env.production
# ============================================================================

# ----------------------------------------------------------------------------
# Application
# ----------------------------------------------------------------------------
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://moncabinet.tn
NEXT_PUBLIC_APP_NAME=MonCabinet
NEXT_PUBLIC_APP_DOMAIN=moncabinet.tn
PORT=3000

# ----------------------------------------------------------------------------
# Database PostgreSQL
# ----------------------------------------------------------------------------
DATABASE_URL=postgresql://moncabinet:YOUR_DB_PASSWORD_HERE@postgres:5432/moncabinet
DB_USER=moncabinet
DB_PASSWORD=YOUR_DB_PASSWORD_HERE
DATABASE_SSL=false

# ----------------------------------------------------------------------------
# MinIO Storage
# ----------------------------------------------------------------------------
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ACCESS_KEY=YOUR_MINIO_ACCESS_KEY_HERE
MINIO_SECRET_KEY=YOUR_MINIO_SECRET_KEY_HERE
MINIO_ROOT_USER=YOUR_MINIO_ACCESS_KEY_HERE
MINIO_ROOT_PASSWORD=YOUR_MINIO_SECRET_KEY_HERE
MINIO_BUCKET=documents

# ----------------------------------------------------------------------------
# Redis Cache
# ----------------------------------------------------------------------------
REDIS_URL=redis://redis:6379

# ----------------------------------------------------------------------------
# Auth (JWT HttpOnly)
# ----------------------------------------------------------------------------
NEXTAUTH_URL=https://moncabinet.tn
NEXTAUTH_SECRET=YOUR_JWT_SECRET_HERE

# ----------------------------------------------------------------------------
# Resend Email Service
# ----------------------------------------------------------------------------
RESEND_API_KEY=re_YOUR_RESEND_API_KEY_HERE
RESEND_FROM_EMAIL=notifications@moncabinet.tn

# ----------------------------------------------------------------------------
# Brevo Email Service (Notifications quotidiennes)
# ----------------------------------------------------------------------------
BREVO_API_KEY=xkeysib-...
BREVO_SENDER_EMAIL=notifications@moncabinet.tn
BREVO_SENDER_NAME=MonCabinet
ADMIN_EMAIL=admin@moncabinet.tn

# ----------------------------------------------------------------------------
# Cron Secret
# ----------------------------------------------------------------------------
CRON_SECRET=YOUR_CRON_SECRET_HERE

# ----------------------------------------------------------------------------
# Google Drive OAuth Integration (optionnel)
# ----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET
GOOGLE_REDIRECT_URI=https://moncabinet.tn/api/integrations/google-drive/callback
GOOGLE_DRIVE_WEBHOOK_VERIFY_TOKEN=YOUR_GOOGLE_VERIFY_TOKEN_HERE

# ----------------------------------------------------------------------------
# WhatsApp Business Webhook (optionnel)
# ----------------------------------------------------------------------------
WHATSAPP_WEBHOOK_VERIFY_TOKEN=YOUR_WHATSAPP_VERIFY_TOKEN_HERE
WHATSAPP_APP_SECRET=YOUR_WHATSAPP_APP_SECRET_HERE

# ----------------------------------------------------------------------------
# IA / LLM Configuration (optionnel)
# ----------------------------------------------------------------------------
# Groq (LLM rapide et economique - prioritaire si configure)
GROQ_API_KEY=gsk_...
GROQ_MODEL=llama-3.3-70b-versatile

# Anthropic Claude (LLM secondaire)
ANTHROPIC_API_KEY=sk-ant-api03-...
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# OpenAI (Embeddings cloud)
OPENAI_API_KEY=sk-proj-...
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Ollama (Embeddings locaux - optionnel en production)
OLLAMA_ENABLED=false
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=qwen3-embedding:0.6b

# ----------------------------------------------------------------------------
# RAG Configuration
# ----------------------------------------------------------------------------
RAG_ENABLED=true
RAG_CHUNK_SIZE=1024
RAG_CHUNK_OVERLAP=100
RAG_MAX_RESULTS=5
RAG_SIMILARITY_THRESHOLD=0.7

# Seuils par type de source
RAG_THRESHOLD_DOCUMENTS=0.7
RAG_THRESHOLD_JURISPRUDENCE=0.6
RAG_THRESHOLD_KB=0.65
RAG_THRESHOLD_MIN=0.5

# Diversite des sources
RAG_MAX_CHUNKS_PER_SOURCE=2
RAG_MIN_SOURCES=2

# Quotas IA
AI_MONTHLY_QUOTA_DEFAULT=100
AI_MAX_TOKENS_PER_REQUEST=4000

# ----------------------------------------------------------------------------
# Chiffrement (tokens Google Drive)
# ----------------------------------------------------------------------------
ENCRYPTION_KEY=YOUR_64_CHAR_HEX_KEY_HERE

# ----------------------------------------------------------------------------
# PgAdmin (Optionnel)
# ----------------------------------------------------------------------------
PGADMIN_EMAIL=admin@moncabinet.tn
PGADMIN_PASSWORD=YOUR_PGADMIN_PASSWORD_HERE

# ============================================================================
# COMMANDES POUR GENERER LES SECRETS
# ============================================================================
#
# DB_PASSWORD (32 chars):
#   openssl rand -base64 32 | tr -d "=+/" | cut -c1-32
#
# MINIO_SECRET_KEY (32 chars):
#   openssl rand -base64 32 | tr -d "=+/" | cut -c1-32
#
# NEXTAUTH_SECRET (32 chars):
#   openssl rand -base64 32
#
# CRON_SECRET (32 chars):
#   openssl rand -base64 32
#
# GOOGLE_DRIVE_WEBHOOK_VERIFY_TOKEN (32 chars):
#   openssl rand -hex 16
#
# WHATSAPP_WEBHOOK_VERIFY_TOKEN (20 chars):
#   openssl rand -hex 10
#
# ============================================================================
